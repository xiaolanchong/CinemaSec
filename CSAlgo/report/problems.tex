%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Проблемы и перспективы}
\label{sec:problems}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
Текущая версия алгоритма чувствительна к посторонней засветке, т.е. засветке идущей не от экрана. В этом случае кресла оказываются освещены по другому, нежели они были освещены в пустом зале когда мы накапливали статический фон. В результате, текущее изображение кресла отличается от шаблона, а кресло воспринимается как занятое каким-либо объектом. Аналогичным образом на работу алгоритма влияет искажение картинки. Перечислим все ``физические'' факторы
%
\begin{enumerate}
\itemsep = -\parsep
\item Появление посторонней засветки, полностью или частично включено верхнее освещение кинозала;
\item Картинка замутнена, отсутствует резкость, идут помехи;
\item В пределах картинки получаемой с одной камеры, передние ряды пересвечены, а задние недосвечены;
\item Горит неяркий посторонний светильник;
\item Яркие световые переходы (обычно между лампой подсветки ступенек и спинкой креслом) порождают переходный процесс, который проявляется в виде затухающих синусоидальных волн, и может восприниматься как объект в кресле;
\item Очень низкая освещенность в течение почти всего сеанса;
\item Другие (непонятные) причины.
\end{enumerate}
%
Первый фактор возникает, как правило, из-за рассогласования расписания, когда процесс наблюдения начинается при включённом верхнем освещении. Особенно коварна ситуация когда включена часть освещения так, что некоторые камеры воспринимают ``день'' и не посчитывают статистику, а некоторые воспринимают ``ночь'' и начинают процесс наблюдения. Здесь может помочь более тщательная настройка алгоритма ``день-ночь''. Если хотя бы одна камера в зале определила ``день'' в первой трети сеанса, процесс наблюдения не начинается во всём зале. Соответственно, если хотя бы одна камера в зале определила ``день'' в последней трети сеанса, процесс наблюдения прекращается.
Второй фактор связан с функционированием оборудования и не может быть исправлен, если сбой произошёл после настройки алгоритма. Впрочем, если картинка всегда мутная (и до и после настройки), алгоритм воспримет это как нормальную ситуацию. Хуже ситуация когда со сменой освещенности меняется диафрагма, а вместе с ней резкость, что воспринимается как изменение (движение) внутри кресла. Здесь можно рекомендовать только более тщательную настройку оборудования.
Третья фактор связан с ограниченным динамическим диапазоном камеры. При яркой вспышке на экране вещи лежащие на передних креслах пересвечиваются (исчезает текстура, складки одежды и т.п.). Как только освещение падает, проявляется структура одежды. Алгоритм воспринимает это как изменение (движение) внутри кресла. Проблему, до некоторой степени, можно исправить более тщательным структурным анализом, но за счёт снижения быстродействия.
Четвертый, пятый и отчасти шестой факторы могут быть компенсированы построением нескольких шаблонов пустого кресла для разных ситуаций освещения. Для этого нами проделана вся необходимая работа, но мы не успели обучить алгоритм.  Обучение займёт несколько дней.
Кроме перечисленных факторов мы наблюдали непонятные выбросы статистики. Это может быть следствием как сбоя оборудования, так и программного сбоя. Единственное средство в данном случае это сохранение развернутой отладочной информации в процессе настройки, что потребует некоторых затрат на программирование.

Ещё одним источником ошибок является сложное поведение людей сидящих в зале. Ситуации, когда человек облокачивается на соседа, занимает значительную часть соседнего кресла, ложится на несколько кресел и т.п. на сегодняшний день практически не могут быть распознаны (по крайней мере в режиме real-time). Поэтому их следует рассматривать как источники неизбежных ошибок. Однако одна ситуация, а именно пересаживания людей во время сеанса, может быть прослежена с некоторой степенью достоверности. Если одно кресло освободилось, а другое через небольшой промежуток времени ($3{\div}5$ минут) оказалось занятым, мы считаем что человек просто пересел. Хотя с логической точки зрения возможна альтернатива - один зритель вышел, другой вскоре зашёл. Тем не менее, маловероятно, что новый зритель зашел в зал сразу после выхода другого зрителя.

Можно констатировать, что простые схемы, основанные на корреляции шаблонов и детекции изменений внутри кресла существенно не могут быть улучшены. Процент распознавания в $95{\div}97\%$, по-видимому, является пределом точности для данного класса алгоритмов. Следующим шагом будет привлечение анализа формы объекта, его гистограмм и коррелограмм \cite{?}, а также сбора и анализа статистики признаков человека \cite{?}. 

